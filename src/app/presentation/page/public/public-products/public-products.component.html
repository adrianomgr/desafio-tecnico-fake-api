<div class="public-products">
  <div class="container">
    <div class="section-header">
      <h1 class="section-title">Todos os Produtos</h1>
      <p class="section-subtitle">Explore nossa coleção completa de produtos</p>
    </div>

    <div class="filters-container">
      <div>
        <label for="category-select" class="filter-label">Categoria:</label>
        <p-select
          id="category-select"
          [options]="categoryOptions"
          optionLabel="label"
          optionValue="value"
          [(ngModel)]="selectedCategory"
          (onChange)="onCategoryChange()"
          placeholder="Todas as categorias"
          class="filter-select"
        ></p-select>
      </div>

      <div>
        <label for="search-input" class="filter-label">Buscar:</label>
        <input
          id="search-input"
          type="text"
          pInputText
          [(ngModel)]="searchTerm"
          (input)="onSearchChange()"
          placeholder="Digite para buscar produtos..."
          class="filter-input"
        />
      </div>
    </div>

    @if (!loading) {
    <div class="products-grid">
      @for (product of displayedProducts; track product.id) {
      <app-product-card
        [product]="product"
        type="products"
        [showQuantitySelector]="true"
        [showAddToCart]="true"
        [pageFrom]="PageFromEnum.PUBLIC_PRODUCTS"
        (productClick)="viewProduct($event)"
      >
      </app-product-card>
      }
    </div>
    } @if (loading || loadingMore) {
    <div class="loading-container">
      <p-progressSpinner [style]="{ width: '50px', height: '50px' }"></p-progressSpinner>
      <p class="loading-text">Carregando produtos...</p>
    </div>
    } @if (!loading && !loadingMore && !hasMoreItems && displayedProducts.length > 0) {
    <div class="flex justify-center">
      <p-message severity="secondary" variant="outlined"
        >Você visualizou todos os produtos disponíveis</p-message
      >
    </div>
    }
  </div>
</div>
